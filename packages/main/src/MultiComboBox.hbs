<div class="ui5-multi-combobox--wrapper">
	<ui5-input id="ui5-multi-combobox--input"
		value="{{ctr.value}}"
		placeholder="{{ctr.placeholder}}"
		?disabled={{ctr.disabled}}
		?readonly={{ctr.readonly}}
		value-state="{{ctr.valueState}}"
		show-suggestions
		@input="{{ctr._inputChage}}"
		@keydown="{{ctr._keydown}}">

		<ui5-tokenizer data-ui5-slot="_beginContent"
			show-more
			?disabled="{{ctr.disabled}}"
			style="{{styles.tokenizer}}"
			@showMoreItemsPress="{{ctr._showMorePopover}}"
			@tokenDelete="{{ctr._tokenDelete}}"
			@focusout="{{ctr._tokenizerFocusOut}}"
		>
			{{#each ctr.items}}
				{{#if this.selected}}
					<ui5-token ?readonly="{{../../ctr.readonly}}" class="ui5-multi-combobox--token" data-ui5-id="{{this._id}}" >{{this._nodeText}}</ui5-token>
				{{/if}}
			{{/each}}
		</ui5-tokenizer>

		{{#unless ctr.readonly}}
			<ui5-icon src="sap-icon://slim-arrow-down" 
				data-ui5-slot="icon"
				@press={{ctr._showAllItemsPopover}}
				class={{classes.icon}}
			></ui5-icon>
		{{/unless}}
	</ui5-input>

	<ui5-popover 
		class="ui5-multi-combobox-selected-items--popover"
		horizontal-align="Stretch"
		hide-header
		?hide-arrow={{editable}}
		placement-type="Bottom">
		<ui5-list separators="None" mode="{{selectedItemsListMode}}"
			style="{{styles.listMinWidth}}"
			@selectionChange={{ctr._selectedItemsSelectionChange}}>
			{{#each ctr.items}}
				{{#if this.selected}}
					<ui5-li type="Active" data-ui5-token-id="{{this._id}}" .selected="{{../../editable}}">{{this._nodeText}}</ui5-li>
				{{/if}}
			{{/each}}
		</ui5-list>
	</ui5-popover>

	<ui5-popover class="ui5-multi-combobox-all-items--popover"
		hide-header
		hide-arrow
		horizontal-align="Stretch"
		initial-focus="ui5-multi-combobox--input"
		horizontal-align="Left"
		placement-type="Bottom"
		@selectionChange={{ctr._allItemsSelectionChange}}
		@afterClose={{ctr._afterAllPopoverClose}}
		@afterOpen={{ctr._afterAllPopoverOpen}}>
		<ui5-list separators="None" mode="MultiSelect" style="{{styles.listMinWidth}}" class="ui5-multi-combobox-all-items-list">
			{{#each ctr._filteredItems}}
					<ui5-li type="Active" ?selected={{this.selected}} data-ui5-token-id="{{this._id}}">{{this._nodeText}}</ui5-li>
			{{/each}}
		</ui5-list>
	</ui5-popover>

</div>